# Валидатор Соланы - Инструкция по использованию скрипта guard.sh

## Обзор

Данный документ содержит инструкции для настройки и запуска скрипта `guard.sh`, который предназначен для мониторинга и поддержания работоспособности валидатора сети Соланы. Скрипт можно использовать как на основном сервере валидатора, так и на резервном.

## Начало работы

Перед тем как начать использование скрипта, выполните следующие шаги:

### 1. Конфигурационный файл

Скопируйте файл образца конфигурации `.env.mainnet.sample` или `.env.testnet.sample` в новый файл `.env`:

```bash
cp .env.mainnet.sample .env
```

Откройте файл `.env` с помощью текстового редактора и заполните необходимые настройки:

```bash
nano .env
```

Убедитесь, что вы корректно прописали все необходимые параметры, включая, но не ограничиваясь, API-ключи, пути к файлам, идентификаторы чатов и пр.

### 2. Права беспарольного доступа к systemctl

Для того чтобы скрипт смог управлять сервисами без ввода пароля пользователя, необходимо добавить соответствующие права в файл `sudoers`. Вам нужно выполнить следующую команду:

```bash
sudo -- bash -c 'echo "<username> ALL=(ALL) NOPASSWD: /bin/systemctl * solana*" >> /etc/sudoers'
```

Замените `<username>` на имя пользователя, под которым запускается скрипт. Например, если вы используете пользователя `solana`, команда будет следующей:

```bash
sudo -- bash -c 'echo "solana ALL=(ALL) NOPASSWD: /bin/systemctl * solana*" >> /etc/sudoers'
```

## Запуск скрипта

После выполнения всех предварительных настроек, вы можете запустить скрипт `guard.sh`:

```bash
./guard.sh
```

Убедитесь, что у вас есть разрешение на выполнение этого файла. Если нет, вы можете добавить эти разрешения с помощью следующей команды:

```bash
chmod +x guard.sh
```

Теперь скрипт будет активно мониторить состояние вашего валидатора Соланы и принимать необходимые действия в случае обнаружения проблем.

## Служебные заметки

- Всегда проверяйте скрипт на тестовой среде, прежде чем запускать его в продакшн.
- Регулярно обновляйте скрипт и следите за изменениями в конфигурации валидатора сети Соланы.
- Всегда имейте резервную копию важных данных и конфигураций для восстановления системы в случае сбоев.

Благодарим за использование скрипта `guard.sh` для безопасной и стабильной работы вашего валидатора Соланы!
